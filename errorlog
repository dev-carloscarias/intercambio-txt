 <add key="vault" value="false" />
    <add key="guatefacturas_username" value="test_user" />
    <add key="guatefacturas_password" value="test_pass" />
    <add key="fel_usuario" value="test_fel_user" />
    <add key="fel_password" value="test_fel_pass" />


   
            // Initialize SharedSecrets to avoid NullReferenceException
            InitializeSharedSecrets();
        }

        private void InitializeSharedSecrets()
        {
            var sharedSecretsField = typeof(AppSecureStartup).GetField("SharedSecrets", BindingFlags.NonPublic | BindingFlags.Static);
            if (sharedSecretsField != null)
            {
                var sharedSecrets = sharedSecretsField.GetValue(null) as Dictionary<string, string>;
                if (sharedSecrets == null)
                {
                    sharedSecrets = new Dictionary<string, string>();
                    sharedSecretsField.SetValue(null, sharedSecrets);
                }
                
                // Add test secrets if they don't exist
                if (!sharedSecrets.ContainsKey("guatefacturas_username"))
                {
                    sharedSecrets["guatefacturas_username"] = "test_user";
                }
                if (!sharedSecrets.ContainsKey("guatefacturas_password"))
                {
                    sharedSecrets["guatefacturas_password"] = "test_pass";
                }
                if (!sharedSecrets.ContainsKey("fel_usuario"))
                {
                    sharedSecrets["fel_usuario"] = "test_fel_user";
                }
                if (!sharedSecrets.ContainsKey("fel_password"))
                {
                    sharedSecrets["fel_password"] = "test_fel_pass";
                }
            }
        }
